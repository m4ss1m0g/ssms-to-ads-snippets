{"Declare and Use KEYSET Cursor":{
    "scope": "sql",
    "prefix": "ssmsDeclareandUseKEYSETCursor",
    "body": [
        "-- =============================================",
        "-- Declare and using a KEYSET cursor",
        "-- =============================================",
        "DECLARE ${1:test_cursor} CURSOR",
        "KEYSET",
        "FOR ${2:SELECT au_fname FROM pubs.dbo.authors}",
        "",
        "DECLARE @name varchar(40)",
        "",
        "OPEN ${1:test_cursor}",
        "",
        "FETCH NEXT FROM ${1:test_cursor} INTO @name",
        "WHILE (@@fetch_status ${3:} -1)",
        "BEGIN",
        "\tIF (@@fetch_status ${3:} -2)",
        "\tBEGIN",
        "--\t\tPRINT 'add user defined code here' ",
        "--\t\teg.",
        "\t\tPRINT 'updating record for ' + @name",
        "\t\tUPDATE pubs.dbo.authors ",
        "\t\tSET phone = replace(phone, ' ', '-')",
        "\t\tWHERE CURRENT OF ${1:test_cursor}",
        "\tEND",
        "\tFETCH NEXT FROM ${1:test_cursor} INTO @name",
        "END",
        "",
        "CLOSE ${1:test_cursor}",
        "DEALLOCATE ${1:test_cursor}",
        "GO",
        "",
        ""
    ],
    "description": "Declare and Use KEYSET Cursor"
},"Declare and Use READ_ONLY Cursor":{
    "scope": "sql",
    "prefix": "ssmsDeclareandUseREAD_ONLYCursor",
    "body": [
        "-- =============================================",
        "-- Declare and using a READ_ONLY cursor",
        "-- =============================================",
        "DECLARE ${1:test_cursor} CURSOR",
        "READ_ONLY",
        "FOR ${2:SELECT au_fname FROM pubs.dbo.authors}",
        "",
        "DECLARE @name varchar(40)",
        "OPEN ${1:test_cursor}",
        "",
        "FETCH NEXT FROM ${1:test_cursor} INTO @name",
        "WHILE (@@fetch_status ${3:} -1)",
        "BEGIN",
        "\tIF (@@fetch_status ${3:} -2)",
        "\tBEGIN",
        "--\t\tPRINT 'add user defined code here'",
        "--\t\teg.",
        "\t\tDECLARE @message varchar(100)",
        "\t\tSELECT @message = 'my name is: ' + @name",
        "\t\tPRINT @message",
        "\tEND",
        "\tFETCH NEXT FROM ${1:test_cursor} INTO @name",
        "END",
        "",
        "CLOSE ${1:test_cursor}",
        "DEALLOCATE ${1:test_cursor}",
        "GO",
        "",
        ""
    ],
    "description": "Declare and Use READ_ONLY Cursor"
},"Declare and Use UPDATE Cursor":{
    "scope": "sql",
    "prefix": "ssmsDeclareandUseUPDATECursor",
    "body": [
        "-- =============================================",
        "-- Declare and using an UPDATE cursor",
        "-- =============================================",
        "DECLARE ${1:@v1} ${2:varchar(20)}, ",
        "\t${3:@v2} ${4:varchar(40)}",
        "",
        "DECLARE\t${5:test_cursor} CURSOR ",
        "FOR SELECT ${6:au_fname}, ${7:au_lname} FROM ${8:pubs.dbo.authors}",
        "FOR UPDATE of ${6:au_fname}",
        "",
        "DECLARE @count smallint",
        "SELECT @count = 1",
        "",
        "OPEN ${5:test_cursor}",
        "FETCH NEXT FROM ${5:test_cursor} INTO ${1:@v1}, ${3:@v2}",
        "",
        "WHILE (@@fetch_status ${9:} -1)",
        "BEGIN",
        "\tIF (@@fetch_status ${9:} -2)",
        "\tBEGIN",
        "--\t\tPRINT\t'add user-defined code here...'",
        "--\t\teg",
        "\t\tPRINT 'updating record of ' + @v1 + ' ' + @v2",
        "\t\tUPDATE pubs.dbo.authors",
        "\t\tSET au_fname = @v1 + '-' + CAST(@count AS varchar(4))",
        "\t\tWHERE au_lname = @v2",
        "\tEND",
        "\tFETCH NEXT FROM ${5:test_cursor} INTO ${1:@v1}, ${3:@v2}",
        "\tSELECT @count = @count + 1",
        "END",
        "",
        "CLOSE ${5:test_cursor}",
        "DEALLOCATE ${5:test_cursor}",
        "GO",
        "",
        ""
    ],
    "description": "Declare and Use UPDATE Cursor"
},"SCROLL Cursor with Various FETCH Options":{
    "scope": "sql",
    "prefix": "ssmsSCROLLCursorwithVariousFETCHOptions",
    "body": [
        "-- =============================================",
        "-- Declare a SCROLL cursor and use various FETCH options",
        "-- =============================================",
        "DECLARE ${1:test_cursor} SCROLL CURSOR FOR",
        "${2:SELECT * FROM pubs.dbo.authors}",
        "",
        "OPEN ${1:test_cursor}",
        "",
        "-- Fetch the first row in the cursor.",
        "FETCH FIRST FROM ${1:test_cursor}",
        "",
        "-- Fetch the last row in the cursor.",
        "FETCH LAST FROM ${1:test_cursor}",
        "",
        "-- Fetch the row immediately prior to the current row in the cursor.",
        "FETCH PRIOR FROM ${1:test_cursor}",
        "",
        "-- Fetch the row immediately after the current row in the cursor.",
        "FETCH NEXT FROM ${1:test_cursor}",
        "",
        "-- Fetch the nth row in the cursor.",
        "FETCH ABSOLUTE ${3:8} FROM ${1:test_cursor}",
        "",
        "-- Fetch the row that is n rows before or after the current row.",
        "FETCH RELATIVE ${4:-2} FROM ${1:test_cursor}",
        "",
        "CLOSE ${1:test_cursor}",
        "DEALLOCATE ${1:test_cursor}",
        "GO",
        "",
        ""
    ],
    "description": "SCROLL Cursor with Various FETCH Options"
}}